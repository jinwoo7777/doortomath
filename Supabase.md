Always respond in Korean

## Supabase λ°μ΄ν„°λ² μ΄μ¤ μ ‘κ·Ό κ·μΉ™

### π”’ κΈ°λ³Έ μ›μΉ™: RLS μ°μ„  μ‚¬μ©
λ¨λ“  Supabase λ°μ΄ν„°λ² μ΄μ¤ CRUD μ‘μ—…μ€ **Row Level Security (RLS) λ°©μ‹μ„ μ°μ„ μ μΌλ΅ μ‚¬μ©**ν•λ‹¤.

### π” RLS λ°©μ‹ κµ¬ν„ κ°€μ΄λ“

#### 1. ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“ μΈμ¦
```javascript
// μΈμ¦λ μ„Έμ…μ΄ μλ” Supabase ν΄λΌμ΄μ–ΈνΈ μ‚¬μ©
const authenticatedSupabase = createClientComponentClient();

// μ„Έμ… ν† ν°μΌλ΅ λ…μ‹μ  μΈμ¦
if (session?.access_token) {
  await authenticatedSupabase.auth.setSession({
    access_token: session.access_token,
    refresh_token: session.refresh_token
  });
}
```

#### 2. CRUD μ‘μ—… μ‹¤ν–‰
```javascript
const { data, error } = await authenticatedSupabase
  .from('table_name')
  .select/insert/update/delete(...)
  .eq('id', itemId);
```

#### 3. μ¤λ¥ μ²λ¦¬ ν¨ν„΄
```javascript
if (error) {
  console.error('β μ‘μ—… μ‹¤ν¨:', error);
  
  // RLS κ΄€λ ¨ μ¤λ¥ κµ¬λ¶„
  if (error.message?.includes('RLS') || error.message?.includes('policy') || error.code === '42501') {
    toast.error('κ¶ν•μ΄ μ—†μµλ‹λ‹¤. κ΄€λ¦¬μλ΅ λ΅κ·ΈμΈν–λ”μ§€ ν™•μΈν•΄μ£Όμ„Έμ”.');
  } else if (error.code === 'PGRST116') {
    toast.error('λ°μ΄ν„°λ¥Ό μ°Ύμ„ μ μ—†μµλ‹λ‹¤.');
  } else {
    toast.error(`μ‘μ—… μ¤‘ μ¤λ¥κ°€ λ°μƒν–μµλ‹λ‹¤: ${error.message}`);
  }
  throw error;
}
```

### π« API μ—”λ“ν¬μΈνΈ μ‚¬μ© μμ™Έ μƒν™©

λ‹¤μ κ²½μ°μ—λ§ API μ—”λ“ν¬μΈνΈ λ°©μ‹μ„ μ‚¬μ©ν•λ‹¤:

1. **λ³µμ΅ν• λΉ„μ¦λ‹μ¤ λ΅μ§**: μ—¬λ¬ ν…μ΄λΈ” κ°„ λ³µμ΅ν• νΈλμ­μ…μ΄ ν•„μ”ν• κ²½μ°
2. **λ€λ‰ λ°μ΄ν„° μ²λ¦¬**: ν• λ²μ— λ§μ€ λ μ½”λ“λ¥Ό μ²λ¦¬ν•΄μ•Ό ν•λ” κ²½μ°
3. **μ™Έλ¶€ μ„λΉ„μ¤ μ—°λ™**: μ΄λ©”μΌ λ°μ†΅, νμΌ μ²λ¦¬ λ“± μ™Έλ¶€ APIμ™€ μ—°λ™μ΄ ν•„μ”ν• κ²½μ°
4. **μ„±λ¥ μµμ ν™”**: RLS λ°©μ‹μΌλ΅ ν•΄κ²°ν•κΈ° μ–΄λ ¤μ΄ μ„±λ¥ μ΄μκ°€ μλ” κ²½μ°
5. **RLS μ •μ±…μΌλ΅ ν•΄κ²°ν•  μ μ—†λ” νΉμν• κ¶ν• μ”κµ¬μ‚¬ν•­**

### π“ λ΅κΉ… ν¨ν„΄

λ¨λ“  λ°μ΄ν„°λ² μ΄μ¤ μ‘μ—…μ— μΌκ΄€λ λ΅κΉ…μ„ μ μ©ν•λ‹¤:

```javascript
// μ‘μ—… μ‹μ‘
console.log('π”„ [μ‘μ—…λ…] μ‹μ‘:', { κ΄€λ ¨_λ°μ΄ν„° });

// μΈμ¦ μ‹λ„
console.log('π” μ„Έμ… ν† ν°μΌλ΅ μΈμ¦ μ‹λ„');

// μ‘μ—… μ„±κ³µ
console.log('β… [μ‘μ—…λ…] μ„±κ³µ:', result);

// μ‘μ—… μ‹¤ν¨
console.error('β [μ‘μ—…λ…] μ‹¤ν¨:', error);
```

### π” κ¶ν• κ²€μ¦ μμ„

1. **ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“**: μ„Έμ… λ° μ‚¬μ©μ μ—­ν•  ν™•μΈ
2. **λ°μ΄ν„°λ² μ΄μ¤ λ λ²¨**: RLS μ •μ±…μ„ ν†µν• κ¶ν• κ²€μ¦
3. **μ„λ²„ μ‚¬μ΄λ“** (API μ—”λ“ν¬μΈνΈ μ‚¬μ© μ‹): μ¶”κ°€ λΉ„μ¦λ‹μ¤ λ΅μ§ κ²€μ¦

### π’΅ λ¨λ²” μ‚¬λ΅€

#### DO (κ¶μ¥)
- β… RLS μ •μ±…μ„ λ¨Όμ € μ„¤μ •ν•κ³  ν΄λΌμ΄μ–ΈνΈ μ½”λ“ μ‘μ„±
- β… λ…μ‹μ  μ„Έμ… μΈμ¦μΌλ΅ `auth.uid()` λ¬Έμ  λ°©μ§€
- β… κµ¬μ²΄μ μ΄κ³  μλ―Έ μλ” μ¤λ¥ λ©”μ‹μ§€ μ κ³µ
- β… μ‘μ—… μ „ν›„ λ°μ΄ν„° μƒλ΅κ³ μΉ¨μΌλ΅ UI μΌκ΄€μ„± μ μ§€
- β… λ΅λ”© μƒνƒ κ΄€λ¦¬λ΅ μ¤‘λ³µ μ”μ²­ λ°©μ§€

#### DON'T (ν”Όν•΄μ•Ό ν•  κ²ƒ)
- β νΈμμƒ λ°”λ΅ Service Role Key μ‚¬μ©
- β RLS μ •μ±… μ°νλ¥Ό κΈ°λ³Έ ν•΄κ²°μ±…μΌλ΅ μ‚¬μ©
- β ν΄λΌμ΄μ–ΈνΈμ—μ„ λ―Όκ°ν• λ°μ΄ν„° κ²€μ¦λ§ μν–‰
- β μ¤λ¥ λ°μƒ μ‹ μΌλ°μ μΈ λ©”μ‹μ§€λ§ ν‘μ‹
- β κ¶ν• λ¬Έμ λ¥Ό λ¬΄μ‹ν•κ³  μ°ν λ°©λ²•λ§ μ°ΎκΈ°

### π›΅οΈ λ³΄μ• μ²΄ν¬λ¦¬μ¤νΈ

μ½”λ“ λ¦¬λ·° μ‹ λ‹¤μ ν•­λ©μ„ ν™•μΈν•λ‹¤:

- [ ] RLS μ •μ±…μ΄ μ¬λ°”λ¥΄κ² μ„¤μ •λμ–΄ μλ”κ°€?
- [ ] μ„Έμ… μΈμ¦μ΄ λ…μ‹μ μΌλ΅ μ²λ¦¬λκ³  μλ”κ°€?
- [ ] κ¶ν• μ¤λ¥κ°€ μ μ ν μ²λ¦¬λκ³  μλ”κ°€?
- [ ] λ―Όκ°ν• λ°μ΄ν„°κ°€ ν΄λΌμ΄μ–ΈνΈμ— λ…Έμ¶λμ§€ μ•λ”κ°€?
- [ ] μ‚¬μ©μ μ…λ ¥μ΄ μ μ ν κ²€μ¦λκ³  μλ”κ°€?

### π“‹ κµ¬ν„ μ²΄ν¬λ¦¬μ¤νΈ

μƒλ΅μ΄ CRUD κΈ°λ¥ κµ¬ν„ μ‹:

1. [ ] RLS μ •μ±… μ„¤μ •/ν™•μΈ
2. [ ] ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“ μ„Έμ… μΈμ¦ κµ¬ν„
3. [ ] μ μ ν• μ¤λ¥ μ²λ¦¬ λ° μ‚¬μ©μ ν”Όλ“λ°±
4. [ ] λ΅λ”© μƒνƒ λ° μ¤‘λ³µ μ”μ²­ λ°©μ§€
5. [ ] μΌκ΄€λ λ΅κΉ… ν¨ν„΄ μ μ©
6. [ ] UI μƒνƒ λ™κΈ°ν™” (λ°μ΄ν„° μƒλ΅κ³ μΉ¨)
7. [ ] κ¶ν•λ³„ ν…μ¤νΈ μν–‰